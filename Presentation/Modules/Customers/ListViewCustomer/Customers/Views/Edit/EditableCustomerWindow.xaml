<Window x:Class="Aksl.Modules.ListViewCustomer.Views.EditableCustomerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        x:Name="catalogDialogWindow"
        xmlns:ei="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:views="clr-namespace:Aksl.Modules.ListViewCustomer.Views"
        xmlns:viewmodels="using:Aksl.Modules.ListViewCustomer.ViewModels"
        mc:Ignorable="d"
        Title="{Binding Path=DisplayName}"
        WindowStartupLocation="CenterScreen"
        Height="400"
        Width="700">
    <Window.Style>
        <Style TargetType="{x:Type Window}">
            <!--<Setter Property="SizeToContent"
                    Value="WidthAndHeight" />-->
            <Setter Property="ResizeMode"
                    Value="NoResize" />
            <Setter Property="Width"
                    Value="800" />
            <Setter Property="Height"
                    Value="600" />
        </Style>
    </Window.Style>
    <Window.Resources>
        <Storyboard x:Key="inTransition"
                    SpeedRatio="1.5">
            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="Opacity"
                             From="0.2"
                             To="1"
                             Duration="0:0:2.5"></DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[1].Angle"
                             From="70"
                             To="0"
                             Duration="0:0:2"></DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[0].ScaleX"
                             From="0"
                             To="1"
                             Duration="0:0:2"
                             AccelerationRatio="1"></DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[0].ScaleY"
                             From="0"
                             To="1"
                             Duration="0:0:2"
                             AccelerationRatio="1"></DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[0].ScaleX"
                             To="0.98"
                             BeginTime="0:0:2"
                             Duration="0:0:0.05"
                             DecelerationRatio="1"></DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[0].ScaleY"
                             To="0.98"
                             BeginTime="0:0:2"
                             Duration="0:0:0.05"
                             DecelerationRatio="1"></DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[0].ScaleX"
                             To="1"
                             BeginTime="0:0:2.05"
                             Duration="0:0:0.2"
                             AccelerationRatio="1"></DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="commandBorder"
                             Storyboard.TargetProperty="RenderTransform.Children[0].ScaleY"
                             To="1"
                             BeginTime="0:0:2.05"
                             Duration="0:0:0.2"
                             AccelerationRatio="1"></DoubleAnimation>

        </Storyboard>
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <BeginStoryboard Storyboard="{StaticResource inTransition}" />
        </EventTrigger>
    </Window.Triggers>
    
    <Grid >
        <Grid Name="commandBorder">
            <Grid.RenderTransform>
                <TransformGroup>
                    <ScaleTransform></ScaleTransform>
                    <RotateTransform></RotateTransform>
                </TransformGroup>
            </Grid.RenderTransform>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <Border BorderThickness="2"
                    CornerRadius="2"
                    BorderBrush="Black"
                    Background="WhiteSmoke"
                    Grid.Row="0">
            <views:EditableCustomerItemView DataContext="{Binding Path=EditableCustomerItem}" />
            </Border>
            
            <Border BorderThickness="1"
                    CornerRadius="2"
                    BorderBrush="Black"
                    Background="WhiteSmoke"
                    Grid.Row="1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.5*" />
                        <ColumnDefinition Width="0.5*" />
                    </Grid.ColumnDefinitions>

                    <Button x:Name="OkButton"
                            Content="保存"
                            Command="{Binding SaveCommand}"
                            Width="75"
                            Height="25"
                            HorizontalAlignment="Right"
                            Margin="0,5,20,5">
                    </Button>
                    <!--Command="{Binding CancelCommand}"-->
                    <Button x:Name="CancelButton"
                            Content="取消"
                            Grid.Column="2"
                            Width="75"
                            Height="25"
                            HorizontalAlignment="Left"
                            Margin="20,5,0,5">
                        <ei:Interaction.Triggers>
                            <ei:EventTrigger EventName="Click">
                                <ei:CallMethodAction TargetObject="{Binding ElementName=catalogDialogWindow}"
                                                     MethodName="Close" />
                            </ei:EventTrigger>
                        </ei:Interaction.Triggers>
                    </Button>
                </Grid>
            </Border>
        </Grid>

        <!--<ProgressBar Width="100"
                     Height="100"
                     Grid.RowSpan="2"
                     VerticalAlignment="Center"
                     HorizontalAlignment="Center"
                     Visibility="{Binding Path=IsLoading,Mode=OneWay,Converter={StaticResource booleanToVisibilityConverter}}" />-->

        <Label Name="statusLabel"
               Visibility="{Binding Path=IsLoading,Converter={StaticResource booleanToVisibilityConverter}}"
               Content="{Binding Path=StatusMessage,Mode=OneWay}"
               Width="320"
               Height="60"
               FontSize="16"
               FontWeight="Bold"
               Grid.RowSpan="2"
               VerticalAlignment="Center"
               HorizontalAlignment="Center"
               Background="Green"
               VerticalContentAlignment="Center"
               HorizontalContentAlignment="Left">
        </Label>
    </Grid>
</Window>
